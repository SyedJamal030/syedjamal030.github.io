---
import { getCollection } from "astro:content";
import ProjectCard from "./ProjectCard.astro";

const featuredProjects = await getCollection("projects", ({ data }) => {
  return data.featured === true;
});

const sortedFeatured = featuredProjects.sort(
  (a, b) => a.data.order - b.data.order,
);
---

<section class="py-24">
  <div class="container mx-auto px-6">
    <div class="flex justify-between items-end mb-12">
      <div>
        <h2 class="text-4xl font-bold tracking-tight sm:text-5xl">
          Featured <span class="text-primary">Work</span>
        </h2>
        <p class="text-muted-foreground max-w-2xl text-lg">
          Selected projects that demonstrate technical leadership.
        </p>
      </div>
      <a
        href="/projects"
        class="hidden md:block text-primary font-semibold hover:underline decoration-2 underline-offset-4"
      >
        View all projects â†’
      </a>
    </div>

    <div class="grid md:grid-cols-2 gap-12">
      {sortedFeatured.map((project) => <ProjectCard project={project} />)}
    </div>
  </div>
</section>
