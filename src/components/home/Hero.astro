---
import { getEntry } from "astro:content";

const settings = await getEntry("settings", "main");
const heroEntry = await getEntry("hero", "main");
const { data: hero } = heroEntry ?? {};

const isAvailable =
  (settings?.data.availability ?? "Available") === "Available";
---

<section
  class="relative min-h-[95vh] flex items-center justify-center overflow-hidden px-6 py-20"
>
  <div class="absolute inset-0 -z-10">
    <div
      class="absolute top-[-20%] left-[-10%] w-[70%] h-[70%] rounded-full bg-primary/20 blur-[120px] animate-pulse"
    >
    </div>
    <div
      class="absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] rounded-full bg-secondary/15 blur-[100px]"
    >
    </div>
  </div>

  <div class="container max-w-6xl mx-auto flex flex-col items-center">
    <div
      class="group flex items-center gap-3 px-4 py-2 mb-10 rounded-full border border-white/5 bg-white/5 backdrop-blur-md transition-all hover:border-secondary/30"
    >
      <div class="relative flex h-2 w-2">
        <span
          class={`animate-ping absolute inline-flex h-full w-full rounded-full opacity-75 ${isAvailable ? "bg-secondary" : "bg-warning"}`}
        ></span>
        <span
          class={`relative inline-flex rounded-full h-2 w-2 ${isAvailable ? "bg-secondary" : "bg-warning"}`}
        ></span>
      </div>
      <span
        class="text-[10px] font-bold uppercase tracking-[0.2em] text-foreground/80"
      >
        {isAvailable ? "Available for Lead Roles" : "Currently Engaged"}
      </span>
    </div>

    <div class="text-center mb-8">
      <p
        class="text-lg md:text-xl font-medium text-muted-foreground mb-4 tracking-tight"
      >
        {hero?.headingMain}
      </p>
      <h1
        class="text-5xl md:text-8xl lg:text-9xl font-bold tracking-tighter leading-[0.9] text-foreground"
      >
        {hero?.headingAccent}
        <br />
        <span
          class="text-transparent bg-clip-text bg-gradient-to-r from-primary via-secondary to-primary bg-[length:200%_auto] animate-gradient-flow"
        >
          {hero?.headingSuffix}
        </span>
      </h1>
    </div>

    <p
      class="max-w-xl mx-auto text-center text-muted-foreground text-lg md:text-xl mb-12 leading-relaxed opacity-80"
    >
      {hero?.description}
    </p>

    <div class="flex flex-col items-center gap-6">
      <a
        href="/projects"
        class="relative group px-10 py-5 bg-primary text-primary-foreground rounded-xl font-bold overflow-hidden transition-all hover:scale-105 active:scale-95 shadow-[0_0_20px_rgba(79,70,229,0.3)]"
      >
        <span class="relative z-10 flex items-center gap-2">
          View Selected Works
          <svg
            class="w-5 h-5 transition-transform group-hover:translate-x-1"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            ><path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg
          >
        </span>
        <div
          class="absolute inset-0 w-1/2 h-full bg-white/20 skew-x-[-25deg] -translate-x-full group-hover:translate-x-[250%] transition-transform duration-700 ease-in-out"
        >
        </div>
      </a>
    </div>

    <div
      class="mt-12 w-full max-w-4xl px-6 flex flex-col md:flex-row items-center justify-between gap-4 border-t border-white/5 pt-8"
    >
      <span
        class="text-[10px] font-mono uppercase tracking-[0.3em] text-muted-foreground"
        >{hero?.stackTitle}</span
      >
      <div class="flex gap-8 md:gap-12">
        {
          hero?.stack.map((item) => (
            <span class="text-sm font-bold text-foreground/50 hover:text-secondary transition-colors cursor-default">
              {item}
            </span>
          ))
        }
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes gradient-flow {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }
  .animate-gradient-flow {
    animation: gradient-flow 6s ease infinite;
  }
</style>
