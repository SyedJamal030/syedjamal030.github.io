---
import { getEntry } from "astro:content";

const settings = await getEntry("settings", "main");
const heroEntry = await getEntry("hero", "main");
const { data: hero } = heroEntry ?? {}

const isAvailable = (settings?.data.availability ?? "Available") === "Available";
---

<section class="relative min-h-[90vh] flex items-center justify-center overflow-hidden py-20">
  <div class="absolute top-0 left-0 w-full h-full -z-10 opacity-30 dark:opacity-20">
    <div class="absolute top-[-10%] left-[-10%] w-[50%] h-[50%] rounded-full bg-primary blur-[120px]"></div>
    <div class="absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] rounded-full bg-secondary blur-[120px]"></div>
  </div>

  <div class="container px-6 mx-auto text-center pt-20">
    <div class="inline-flex items-center gap-2 px-3 py-1 mb-8 text-sm font-bold uppercase tracking-widest rounded-full bg-secondary/10 text-secondary border border-secondary/20">
      <span class="relative flex h-2 w-2">
        <span class={`animate-ping absolute inline-flex h-full w-full rounded-full opacity-75 ${isAvailable ? 'bg-secondary' : 'bg-amber-500'}`}></span>
        <span class={`relative inline-flex rounded-full h-2 w-2 ${isAvailable ? 'bg-secondary' : 'bg-amber-500'}`}></span>
      </span>
      {isAvailable ? "Open for work" : "Busy"}
    </div>

    <h1 class="text-5xl md:text-7xl font-bold tracking-tight mb-6">
      {hero?.headingMain} <br />
      <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary">
        {hero?.headingAccent}
      </span> <br />
      {hero?.headingSuffix}
    </h1>

    <p class="max-w-2xl mx-auto text-lg md:text-xl text-muted-foreground mb-10 leading-relaxed">
      {hero?.description}
    </p>

    <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
      <a href="/projects" class="px-8 py-4 bg-primary text-primary-foreground rounded-md font-semibold hover:shadow-lg hover:shadow-primary/20 transition-all active:scale-95 w-full sm:w-auto text-center">
        View Projects
      </a>
      <a href="/case-studies" class="px-8 py-4 bg-transparent border border-border hover:bg-muted rounded-md font-semibold transition-all w-full sm:w-auto text-center">
        Read Case Studies
      </a>
    </div>

    <div class="mt-20 pt-10 border-t border-border/50">
      <p class="text-xs uppercase tracking-[0.2em] text-muted-foreground mb-8">
        {hero?.stackTitle}
      </p>
      <div class="flex flex-wrap justify-center gap-8 opacity-60 grayscale hover:grayscale-0 transition-all duration-500">
        {hero?.stack.map((item) => (
          <span class="font-bold text-xl">{item}</span>
        ))}
      </div>
    </div>
  </div>
</section>
