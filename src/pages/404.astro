---
import { Image } from "astro:assets";
import SEO from "../components/SEO.astro";

import "../styles/global.css";

const pathname = Astro.url.pathname;
---

<!doctype html>
<html lang="en" class="bg-[#13151a]">
  <head>
    <SEO title="404: Not Found" />
    <script is:inline>
      const getThemePreference = () => {
        if (
          typeof localStorage !== "undefined" &&
          localStorage.getItem("theme")
        ) {
          return localStorage.getItem("theme");
        }
        return window.matchMedia("(prefers-color-scheme: dark)").matches
          ? "dark"
          : "light";
      };

      const applyTheme = (theme) => {
        const root = document.documentElement;
        if (theme === "dark") {
          root.classList.add("dark");
        } else {
          root.classList.remove("dark");
        }
        root.style.colorScheme = theme;
      };

      const setTheme = () => {
        const theme = getThemePreference();
        applyTheme(theme);
      };

      setTheme();
      document.addEventListener("astro:after-swap", setTheme);

      window
        .matchMedia("(prefers-color-scheme: dark)")
        .addEventListener("change", (e) => {
          const newTheme = e.matches ? "dark" : "light";
          applyTheme(newTheme);
        });

      window.addEventListener("storage", (e) => {
        if (e.key === "theme") {
          setTheme();
        }
      });
    </script>
  </head>
  <body
    class="min-h-screen flex flex-col items-center justify-center p-6 text-center selection:bg-primary/30"
  >
    <main
      class="relative flex flex-col items-center justify-center w-full max-w-2xl"
    >
      <div
        class="absolute -z-10 w-64 h-64 bg-primary/10 blur-[120px] rounded-full top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
      >
      </div>

      <div class="mb-12 animate-fade-in">
        <Image
          src="/logo.png"
          alt="Logo"
          width={100}
          height={100}
          loading="eager"
          class="max-w-full h-auto object-contain transition-all hover:scale-110 duration-500 dark:invert"
        />
      </div>

      <div class="space-y-8 animate-slide-up">
        <div class="space-y-2">
          <h1
            class="text-7xl md:text-8xl font-black tracking-tight text-primary"
          >
            404
          </h1>
          <h2
            class="text-xl md:text-2xl font-bold font-mono tracking-wide text-foreground uppercase"
          >
            [ Page_Not_Found ]
          </h2>
        </div>

        <p
          class="text-muted-foreground max-w-sm mx-auto leading-relaxed italic"
        >
          The requested resource at this path is currently unreachable or has
          been archived.
        </p>

        <div class="flex justify-center">
          <div class="group relative">
            <div
              class="absolute -inset-0.5 bg-gradient-to-r from-primary to-secondary rounded-lg blur opacity-20 group-hover:opacity-40 transition duration-1000"
            >
            </div>
            <code
              class="relative block bg-card border border-border px-6 py-3 rounded-lg text-primary font-mono text-xs md:text-sm"
            >
              <span class="text-secondary opacity-70">guest@portfolio:~$</span> get
              {pathname}
            </code>
          </div>
        </div>
      </div>

      <div class="mt-16 animate-fade-in" style="animation-delay: 400ms;">
        <a
          href="/"
          class="inline-flex items-center gap-3 px-8 py-3 bg-primary text-primary-foreground font-bold rounded-md hover:shadow-[0_0_20px_rgba(var(--primary),0.4)] transition-all active:scale-95"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path>
          </svg>
          <span>Return to Safety</span>
        </a>
      </div>
    </main>
  </body>
</html>

<style is:global>
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fadeIn 1s ease-out forwards;
  }

  .animate-slide-up {
    animation: slideUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  }
</style>
